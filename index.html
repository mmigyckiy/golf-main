<!doctype html>
<html lang="en" data-theme="night">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Drivix — DISTANCE • TIMING • CONTROL</title>
  <meta name="application-name" content="Drivix" />
  <meta property="og:title" content="Drivix — DISTANCE • TIMING • CONTROL" />
  <meta name="description" content="Drivix is a premium long drive challenge inspired by golf's most powerful swing." />

  <link rel="stylesheet" href="css/style.css" />
  <!-- PixiJS for premium swing metrics overlay -->
  <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.x/dist/pixi.min.js"></script>
</head>

<body>
  <div class="gc-ambient gc-ambient--one" aria-hidden="true"></div>
  <div class="gc-ambient gc-ambient--two" aria-hidden="true"></div>
  <div class="gc-ambient gc-ambient--grain" aria-hidden="true"></div>
  <div class="gc-shell">
    <!-- Top Club Header -->
    <header class="gc-topbar gc-panel gc-panel--hero" aria-label="Drivix top bar">
      <div id="memberBackdrop" class="gc-backdrop gc-hidden" aria-hidden="true"></div>
      <div class="top-banner-inner">
        <div class="top-left">
          <div class="gc-brand">
            <div class="drivix-brand">
              <svg class="drivix-mark" viewBox="0 0 72 72" aria-hidden="true" focusable="false">
                <path d="M20 40c12-18 34-24 50-13 3 2 4 6 2 9l-7 14c-2 5-6 8-12 8H26c-11 0-16-10-10-18z"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"></path>
                <path d="M20 26L8 2"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"></path>
              </svg>
              <div class="gc-brand__text">
                <div class="gc-brand__title">DRIVIX</div>
                <div class="gc-brand__sub">DISTANCE • TIMING • CONTROL</div>
              </div>
            </div>
          </div>
        </div>

        <div class="top-center">
          <div class="topbar-profile compact" id="topbarProfile">
            <div class="tp-row">
              <div class="tp-left">
                <div class="tp-kicker">PLAYER PROFILE</div>
                <div class="tp-name-row">
                  <div class="tp-name" id="memberNameTop">Guest</div>
                  <button class="tp-edit" id="memberEditBtnTop" aria-label="Edit name" title="Edit name">✎</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="top-right"></div>
      </div>
      <div id="gc-popovers">
        <div id="memberPopover" class="gc-popover gc-hidden" role="dialog" aria-modal="true" aria-label="Edit member name">
          <div class="gc-popover__title">MEMBER</div>
          <div class="gc-popover__row">
            <input id="memberPopoverInput" type="text" maxlength="16" autocomplete="off" />
          </div>
          <div class="gc-popover__actions">
            <button id="memberPopoverCancel" class="gc-popover__btn" type="button">Cancel</button>
            <button id="memberPopoverSave" class="gc-popover__btn gc-popover__btn--primary" type="button">Save</button>
          </div>
        </div>
      </div>

      <div class="gc-identity gc-hide-duplicate-stats" aria-label="Member identity">
        <div class="gc-identity__item">
          <span class="gc-identity__label">MEMBER<span class="info-i" data-tip="Your player profile. Fatigue/pressure from recent swings can increase risk." data-tooltip="Your player profile. Fatigue/pressure from recent swings can increase risk.">i</span></span>
          <span class="gc-identity__value" id="playerNameLabel">—</span>
        </div>
        <div class="gc-identity__item">
          <span class="gc-identity__label">HANDICAP<span class="info-i" data-tip="Handicap shows how many yards you are behind the reference distance. Lower is better." data-tooltip="Handicap shows how many yards you are behind the reference distance. Lower is better.">i</span></span>
          <span class="gc-identity__value"><span id="handicapValue">—</span> yd</span>
        </div>
        <div class="gc-identity__item">
          <span class="gc-identity__label">PB<span class="info-i" data-tip="Your longest drive ever." data-tooltip="Your longest drive ever.">i</span></span>
          <span class="gc-identity__value"><span id="pbValue">—</span> yd</span>
        </div>
        <div class="gc-identity__item">
          <span class="gc-identity__label">BEST 3 AVG<span class="info-i" data-tip="Average distance of your 3 best drives from the last 20 attempts. This value determines your handicap." data-tooltip="Average distance of your 3 best drives from the last 20 attempts. This value determines your handicap.">i</span></span>
          <span class="gc-identity__value"><span id="best3AvgValue">—</span> yd</span>
        </div>
      </div>
    </header>

    <div class="gc-layout">
      <!-- Main layout -->
      <main class="gc-main">
        <!-- Left column: Tee Shot / Field / Controls -->
        <section class="gc-card gc-card--primary gc-panel gc-panel--hero">
          <div class="gc-card__head">
            <div>
              <div class="gc-eyebrow">LONG DRIVE • TEE SHOT</div>
              <h1 class="gc-h1">Power Window</h1>
              <div id="subline" class="gc-muted gc-subline">
                Precision, timing, and power — one confident swing.
              </div>
            </div>
          </div>

          <div class="gc-power gc-panel gc-panel--soft gc-hidden-legacy">
            <div class="gc-power__label">POWER WINDOW</div>
            <div id="coef" class="gc-power__value">×1.00</div>
            <div class="gc-power__meta">
              <span class="gc-pillStat"><span id="uiDistanceYd">0</span> yd</span>
              <span class="gc-pillStat gc-pillStat--muted">Best: <span id="uiBestYd">0</span> yd</span>
            </div>
          </div>

          <!-- Field -->
          <div class="gc-field gc-panel gc-panel--soft" aria-label="Flight view">
            <div class="gc-flightHud" aria-hidden="true">
              <div class="gc-flightHud__left">
                <div class="gc-flightHud__label">POWER</div>
                <div class="gc-flightHud__x" id="hudX">x1.00</div>
              </div>
              <div class="gc-flightHud__right">
                <div class="gc-flightHud__stat distText"><span class="k">DIST</span><span class="v" id="hudDist">0</span><span class="u">yd</span></div>
                <div id="statusBadge" class="gc-statusBadge gc-hidden" aria-live="polite"></div>
              </div>
            </div>
            <div class="wind-hud" id="windHUD" aria-hidden="true">
              <span class="wind-hud__label">WIND</span>
              <span class="wind-hud__arrow" id="windArrow">▲</span>
              <span class="wind-hud__val" id="windValue">0 mph</span>
            </div>
            <canvas id="flight3dCanvas" class="gc-field__canvas"></canvas>
          </div>

          <!-- Controls -->
          <div class="gc-controls">
            <div class="gc-controls__row gc-controls__row--segmented">
              <div class="gc-segmented" role="group" aria-label="Risk selection">
                <button type="button" class="gc-segmented__btn gc-segmented__btn--active" data-risk="calm">Calm</button>
                <button type="button" class="gc-segmented__btn" data-risk="aggressive">Aggressive</button>
              </div>
            </div>
            <div class="gc-controls__row gc-controls__row--buttons gc-controls__row--primary">
              <div class="gc-swingControl">
                <!-- Unified Pixi Swing Widget (Variant 2) — LEGACY, hidden -->
                <div id="swingWidget" class="swing-widget is-hidden" data-legacy="true" aria-label="Swing Widget"></div>
                <!-- Premium 3-widget row with Pixi canvases -->
                <div class="swing-metrics-row" id="swingMetricsRow">
                  <!-- Pixi overlay for premium B-style visuals -->
                  <div id="swingMetricsPixi" class="swing-metrics-pixi" aria-hidden="true"></div>
                  <div class="swing-metric swing-metric--tempo">
                    <div class="swing-metric__title">SWING TEMPO</div>
                    <div class="swing-metric__body">
                      <canvas id="tempoPixi" class="pixi-widget-canvas" aria-hidden="true"></canvas>
                      <div class="tempo-meter" id="swingTempoControl" role="button" aria-label="Swing tempo" tabindex="0">
                        <div class="tempo-meter__tube" id="swingTempoTube">
                          <div class="tempo-meter__fill" id="swingTempoFill" aria-hidden="true"></div>
                          <div class="tempo-meter__runner" id="swingTempoRunner" aria-hidden="true"></div>
                        </div>
                      </div>
                    </div>
                    <div class="swing-metric__footer">
                      <div class="swing-metric__value" id="tempoValueLabel"><span id="swingTempoPct">0%</span></div>
                      <div class="swing-metric__hint">HOLD • RELEASE</div>
                    </div>
                  </div>
                  <div class="swing-metric swing-metric--path">
                    <div class="swing-metric__title">SWING PATH</div>
                    <div class="swing-metric__body">
                      <canvas id="pathPixi" class="pixi-widget-canvas" aria-hidden="true"></canvas>
                      <div class="alignment-ring" id="alignmentRing" aria-label="Alignment ring">
                        <svg class="alignment-ring__svg" id="alignmentSvg" viewBox="0 0 120 120" aria-hidden="true">
                          <defs>
                            <linearGradient id="alignmentRingGradient" x1="0" y1="10" x2="0" y2="110" gradientUnits="userSpaceOnUse">
                              <stop offset="0%" stop-color="rgba(255,255,255,0.10)"></stop>
                              <stop offset="100%" stop-color="rgba(0,0,0,0.30)"></stop>
                            </linearGradient>
                          </defs>
                          <path class="alignment-ring__base" id="alignmentBase" d=""></path>
                          <path class="alignment-ring__sweet" id="alignmentSweet" d=""></path>
                          <circle class="alignment-ring__ball" id="alignmentBall" cx="60" cy="102" r="3"></circle>
                          <circle class="alignment-ring__runner" id="alignmentRunner" cx="60" cy="12" r="4.2"></circle>
                        </svg>
                        <div class="align-target-tick" aria-hidden="true"></div>
                      </div>
                    </div>
                    <div class="swing-metric__footer">
                      <div class="swing-metric__value swing-metric__value--muted"> </div>
                      <div class="swing-metric__hint"> </div>
                    </div>
                  </div>
                  <div class="swing-metric swing-metric--attack">
                    <div class="swing-metric__title">ATTACK ANGLE</div>
                    <div class="swing-metric__body">
                      <canvas id="attackPixi" class="pixi-widget-canvas" aria-hidden="true"></canvas>
                      <div class="attack-angle" id="attackAngle" aria-label="Attack angle">
                        <!-- Reticle plane: single ring + crosshair + driver silhouette -->
                        <div class="attack-angle__plane" id="attackAnglePlane">
                          <svg class="attack-angle__svg" viewBox="0 0 120 120" aria-hidden="true">
                            <!-- Single outer ring -->
                            <circle class="aa-ring" cx="60" cy="60" r="44"></circle>
                            <!-- Crosshair -->
                            <line class="aa-cross aa-cross--h" x1="16" y1="60" x2="104" y2="60"></line>
                            <line class="aa-cross aa-cross--v" x1="60" y1="16" x2="60" y2="104"></line>
                            <!-- Top arrow indicator -->
                            <path class="aa-arrow" d="M60 10 L56 18 H64 Z"></path>
                            <!-- Glint sparkle -->
                            <g class="aa-glint" transform="translate(96 92)">
                              <path d="M0 -6 L1.5 -1.5 L6 0 L1.5 1.5 L0 6 L-1.5 1.5 L-6 0 L-1.5 -1.5 Z"></path>
                            </g>
                            <!-- Subtle driver silhouette -->
                            <path class="aa-driver"
                              d="M78 26
                                 C92 36, 96 52, 92 68
                                 C88 82, 78 92, 66 94
                                 C72 86, 78 76, 82 66
                                 C86 52, 86 40, 80 30
                                 C79 28, 79 27, 78 26 Z"></path>
                            <!-- Center dot -->
                            <circle class="aa-center" cx="60" cy="60" r="4"></circle>
                          </svg>
                          <!-- Moving indicator (JS uses this ID) -->
                          <div id="attackAngleRunner" class="aa-ball" aria-hidden="true"></div>
                        </div>
                      </div>
                    </div>
                    <div class="swing-metric__footer">
                      <div class="swing-metric__value" id="attackAngleValueLabel"><span id="attackAngleReadout">+0.0°</span></div>
                      <div class="swing-metric__hint"></div>
                    </div>
                  </div>
                </div>
                <!-- PENDULUM STRIKE — LEGACY Visual Prototype, hidden -->
                <div id="pendulumStrike" class="pendulum-strike" data-legacy="true" aria-label="Swing pendulum">
                  <svg class="pendulum-strike__svg" viewBox="0 0 200 240" aria-hidden="true">
                    <!-- Background arc (swing path) -->
                    <path class="pendulum-arc__base" d="M 30 200 A 85 85 0 0 1 170 200" />
                    <!-- Sweet spot segment on arc -->
                    <path class="pendulum-arc__sweet" d="M 85 145 A 85 85 0 0 1 115 145" />
                    <!-- Impact zone marker -->
                    <line class="pendulum-impact__line" x1="100" y1="195" x2="100" y2="210" />
                    <!-- Ball at impact point -->
                    <circle class="pendulum-ball" cx="100" cy="205" r="5" />
                    <!-- Pendulum group (rotates) -->
                    <g class="pendulum-arm" transform="rotate(-12, 100, 45)">
                      <!-- Pivot point -->
                      <circle class="pendulum-pivot" cx="100" cy="45" r="4" />
                      <!-- Shaft -->
                      <line class="pendulum-shaft" x1="100" y1="49" x2="100" y2="175" />
                      <!-- Clubhead -->
                      <rect class="pendulum-head" x="92" y="172" width="16" height="8" rx="4" />
                      <!-- Angle indicator on clubhead -->
                      <line class="pendulum-angle" x1="100" y1="172" x2="100" y2="164" />
                    </g>
                  </svg>
                </div>
              </div>
            </div>
            <div class="gc-controls__row gc-controls__row--meta">
              <div id="perfectWindowLabel" class="gc-mutedSmall">SWEET SPOT: —</div>
              <div class="swing-wind" id="swingWind">
                <span class="swing-wind__label">WIND</span>
                <span class="swing-wind__arrow" id="swingWindArrow">→</span>
                <span class="swing-wind__val" id="swingWindValue">0</span>
              </div>
            </div>
          </div>

          <footer class="gc-footer">
            <span>Drivix — Designed for Distance</span>
          </footer>
        </section>
      </main>

      <aside class="gc-sidepanel" aria-label="Club Panel">
        <div class="gc-card gc-sidecard">
          <div class="gc-card__kicker">DAILY CHALLENGE</div>
          <div class="gc-card__title">Fairway Precision</div>
          <div class="gc-card__text">Land a drive within the long-drive zone (≥ 260 yd) without crashing.</div>
          <div class="gc-badges">
            <span class="gc-badge">Today</span>
            <span class="gc-badge gc-badge--gold">260+ yd</span>
          </div>
        </div>

        <div class="gc-card gc-sidecard">
          <div class="gc-card__kicker">LEADERBOARD TODAY</div>
          <ol class="gc-leaderboard">
            <li><span class="name">E. Morgan</span><span class="val">318 yd</span></li>
            <li><span class="name">A. Sinclair</span><span class="val">304 yd</span></li>
            <li><span class="name">J. Bennett</span><span class="val">298 yd</span></li>
            <li><span class="name">K. Wallace</span><span class="val">289 yd</span></li>
            <li><span class="name">S. Hughes</span><span class="val">281 yd</span></li>
          </ol>
          <div class="gc-minirow">
            <span class="muted">You</span>
            <span class="val" id="youBestInline">—</span>
          </div>
        </div>
      </aside>
      </div>
    </div>
  <!-- Scripts (keep paths consistent with your project) -->
  <script src="js/flight_aviatorlike.js"></script>
  <script src="js/stats.js"></script>
  <script type="module" src="js/swing_path.js"></script>
  <script type="module" src="js/attack_angle.js"></script>
  <script type="module" src="js/swing_metrics_pixi.js"></script>
  <script src="js/swing_widget_pixi.js"></script>
  <script src="js/pixi_tempo.js"></script>
  <script src="js/pixi_swing_path.js"></script>
  <script src="js/pixi_attack_angle.js"></script>
  <script type="module" src="js/app.js"></script>
</body>
</html>
